---
description: Meta-rules for creating and maintaining Cursor rules files
globs: [".cursor/rules/**/*"]
alwaysApply: false
---

# Rules Creation Standards

## When to Create

**Create**: Repeated patterns, project standards, common mistakes, security/performance concerns
**Skip**: One-off solutions, obvious standards, volatile patterns

## File Structure

```yaml
---
description: Brief, clear (1-2 sentences)
globs: ["pattern/**/*.py"]  # Optional, specific
alwaysApply: false  # Default
---
```

## alwaysApply Decision

**true** (Target: 500-600 total lines):

- Core language standards (style, naming)
- Critical security/privacy
- Universal code patterns

**false**:

- Tech-specific (testing, CLI, tools)
- Domain-specific (data, security)
- Large files (>200 lines)

## Content

- Actionable: Show good/bad with examples
- Focused: Single responsibility
- Concise: Split at 400 lines
- Reference: Link `file.py:lines` vs copy
- Explain why, not just what

## Token Optimization

**CRITICAL**: Minimize tokens while maximizing information density for LLM consumption.

### Writing Strategies

**Prefer**:

- Lists over prose: `Use X, Y, Z` not "You should use X. Also use Y. Additionally, use Z."
- Colons over sentences: `Format: ruff format .` not "To format, run ruff format"
- Symbols: `>` `<` `→` `vs` `|` instead of words
- Abbreviations: "config" not "configuration", "args" not "arguments"
- Direct commands: `Add dependencies with uv add pkg` vs "You can add dependencies by using the uv add command with the package name"

**Avoid**:

- Filler words: "please", "always make sure to", "it is important that"
- Verbose transitions: "In addition", "Furthermore", "As mentioned"
- Redundant explanations: Don't explain what's obvious from code
- Marketing language: "powerful", "robust", "comprehensive"
- Repeated context: State once, reference after

### Structure Patterns

**Efficient**:

```markdown
## Commands
- `uv add pkg` - Add dependency
- `uv sync` - Install deps
- `uv run cmd` - Execute in env
```

**Wasteful**:

```markdown
## Commands
To add a dependency, you can use the uv add command.
For example: `uv add package-name`

To install dependencies, use uv sync.
This will install all dependencies.
```

### Code Examples

**Show, don't tell**:

```python
# Good: Type hints required
def process(data: dict[str, Any]) -> list[Transaction]:

# Bad: Missing types
def process(data):
```

**Not**:
"All functions must include type hints for parameters and return values. For example, if you have a function that processes data..."

### Formatting

- **Bold** for critical terms (sparingly)
- `Code` for literals, commands, filenames
- No italics, no underlines
- Headers: Clear hierarchy, brief
- Tables: Only if denser than lists
- Checkboxes: `- [ ]` for actionable items only

### Information Density

**High density** (prefer):

- `MUST use uv, NEVER pip`
- `Prefer: DuckDB > Polars > Pandas`
- `Types: list[T] not List[T]`

**Low density** (avoid):

- "It is required that you always use uv for package management. You should never use pip."
- "When choosing a data processing library, prefer DuckDB first, then Polars, then Pandas as last resort."
- "Use modern Python types like list[T] instead of the deprecated List[T] from typing module."

### Example Comparison

**Before** (32 tokens):

```
When you need to add a new dependency to the project, you should use the uv add command followed by the package name. Do not use pip install.
```

**After** (8 tokens):

```
Add deps: `uv add pkg` (NEVER `pip install`)
```

## Sizes

- Always-Applied: 150-250 lines
- Context-Specific: 200-400 lines
- Max: 500 (split if larger)

## Before Creating

1. Review existing
2. Check overlap
3. Update existing > create new
4. New only if: different globs, >400 lines, distinct topic

## Template

```markdown
# Title

## Principles
[Brief intro]

## Topics
[Subsections with examples]

### ✅ Good
```code```

### ❌ Bad
```avoid```
```
