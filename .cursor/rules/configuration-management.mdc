---
description: Modern configuration management standards using Pydantic Settings
globs: ["**/*.py"]
alwaysApply: false
---

# Configuration Management Standards

## Core Principle

Use **Pydantic Settings** as single source of truth. Never hardcode paths, database connections, or API settings.

**Reference**: See `src/moneybin/config.py` for complete examples.

## Usage Pattern

```python
from moneybin.config import get_database_path, get_settings

# ✅ Good - centralized configuration
conn = duckdb.connect(str(get_database_path()))
settings = get_settings()
raw_path = settings.data.raw_data_path

# ❌ Bad - hardcoded paths
conn = duckdb.connect("data/duckdb/moneybin.duckdb")
```

## Environment Variables

```bash
# Preferred hierarchical format
MONEYBIN_DATABASE__PATH=custom/path/db.duckdb
MONEYBIN_PLAID__CLIENT_ID=your_client_id
MONEYBIN_PLAID__ENVIRONMENT=production

# Legacy format (still supported)
DUCKDB_PATH=data/duckdb/moneybin.duckdb
PLAID_CLIENT_ID=your_client_id
```

## CLI Integration

```python
@app.command("load")
def load_command(source_path: Path = typer.Option(None, help="Source (default: config)")):
    """Load data using config defaults."""
    config = LoadingConfig(source_path=source_path or get_raw_data_path())
```

## Benefits

- Type safety with IDE autocomplete
- Runtime validation
- Environment flexibility
- Safe refactoring
