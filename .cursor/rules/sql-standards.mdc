---
description: SQL formatting and linting standards using SQLFluff with DuckDB dialect
globs: ["**/*.sql", "dbt/**/*.sql", "src/**/sql/**/*.sql", "pyproject.toml"]
alwaysApply: false
---

# SQL Standards

## SQLFluff Configuration

**All SQL linted with SQLFluff** (config in `pyproject.toml`):

- Dialect: DuckDB
- Templater: `jinja` (works for both plain SQL and dbt files)
- Max line length: 88

## File Types

**Raw Schema** (`src/moneybin/sql/schema/*.sql`): Plain SQL, no Jinja needed
**dbt Models** (`dbt/models/**/*.sql`): Jinja templating (`{{ config() }}`, `{{ source() }}`, etc.)

## Running SQLFluff

```bash
uv run sqlfluff lint src/moneybin/sql/  # Lint
uv run sqlfluff fix src/moneybin/sql/   # Auto-fix
```

**CRITICAL**: All config in `pyproject.toml` - never create separate `.sqlfluff` files

See `duckdb-functions.mdc` for DuckDB-specific patterns
