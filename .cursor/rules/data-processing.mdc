---
description: Data processing and integration standards for financial data sources
globs: ["src/extractors/**/*.py", "src/processors/**/*.py", "src/loaders/**/*.py", "pipelines/**/*.py", "dbt/**/*.sql"]
alwaysApply: false
---

# Data Processing Standards

## Library Preference

**Always prefer: DuckDB > Polars > Pandas**

1. **DuckDB**: Analytical queries, aggregations, joins, window functions, direct file reading
2. **Polars**: ETL operations, transformations, lazy evaluation pipelines
3. **Pandas**: Only for external library compatibility (document why DuckDB/Polars won't work)

## Data Sources

- **Tax Documents**: Extract from PDFs (1040, W-2, 1099), validate against form structures
- **Bank Transactions**: Aggregate from APIs/CSV/PDF, auto-categorize, deduplicate
- **Multi-Source**: Consistent normalization, validation, incremental updates, audit trails

## Data Quality

- Validate data types, ranges, required fields
- Cross-reference with original sources
- Automated quality checks and alerts
- Robust error handling with detailed messages
- Track data lineage and transformation history
